# Kafka

## Способы доставки сообщений kafka
- не менее одного раза (at-least-once) - сообщение будет отправляться потребителям до тех пор, пока те не подтвердят его получение
- не более одного раза (at-most-once) - сообщение отправляется только один раз и в случае сбоя не отправляется повторно
- точно один раз (exactly-once) - потребителю гарантировано получить сообщение ровно один раз

## ZooKeeper

Распределенное хранилище для настройки и синхронизации. 
Позволяет хранить информацию о том, как далеко продвинулся в чтении сообщений (смещение offset)
Используется для распределенной настройки и управления

## acks acknowledgments - подтверждение. Быстрее или надежнее.
Определяет сколько подтверждений должен получить производитель от копий ведущей реплики раздела прежде чем запрос будет считаться отправленным.
- acks = 0 - отправили и забыли, нет ответа, нет подтверждения (быстро)
- acks = 1 - ведущая реплика отправляет подтверждение обратно производителю, но не ждет подтверждение от ведомых реплик
- acks = -1 или all - ведущая реплика дождалась подтверждения от всех синхронизированных с ней реплик (долго)





### 1 Какие существуют способы доставки сообщений?


### 2 Когда использовать кафку?

### 3 Какие обязательные конфигурационные параметры для настройки производителя (producer)

### 4 Еще одно конфигурационное свойство, актуальное в нашем сце-
нарии, – это ключ acks (сокращенно от acknowledgments – подтверж-
дения). Он определяет, сколько подтверждений должен получить
производитель от копий ведущей реплики раздела, прежде чем
запрос будет считаться отправленным. Допустимые значения для
этого свойства: all, -1, 1 и 0 [9].
На рис. 4.5 показано поведен

### 5 В случае исключений, что делается? Как реализовать ретрай?

### 6 Что обеспечивает гарантии доставки сообщений? acks

### 7 Важные параметры для потребителя?

### 8 Что такое consumer group?

### 9 Размер сообщения по умолчанию 1 Мб?

### 10 Координатор группы отвечает за?
назначение разделов потребителям не только в начале запуска
группы, но и когда они добавляются в группу или терпят неудачу
и покидают ее [8]. А в случае, когда разделов больше, чем потре-
бителей, потребители могут обслуживать несколько разделов,
если это необходимо.

### 11 Стратегия назначения разделов?
Еще один момент, о котором мы должны знать, – как назнача-
ются разделы потребителям. Это важно, потому что помогает
выяснить, сколько разделов будет назначено для обработки
каждому из ваших потребителей. Свойство partition.assignment.
strategy определяет стратегию назначения разделов каждому
потребителю [14]. Доступны стратегии Range, RoundRobin, Sticky
и CooperativeSticky [15].

### 12 Когда происходит ребалансировка?

https://habr.com/ru/company/southbridge/blog/547264/

### 13 Зачем в кафка использовать партиции?